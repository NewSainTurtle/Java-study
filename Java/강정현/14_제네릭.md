# μ λ„¤λ¦­

## μ λ„¤λ¦­ (Generic)

λ°μ΄ν„°μ νƒ€μ…μ„ μΌλ°ν™”(generalize).

ν΄λμ¤λ‚ λ©”μ†λ“μ—μ„ μ‚¬μ©ν•  λ‚΄λ¶€ λ°μ΄ν„° νƒ€μ…μ„ μ»΄νμΌ μ‹μ— μ§€μ •ν•λ” λ°©λ²•.

ν΄λμ¤λ‚ λ©”μ†λ“λ¥Ό μ„ μ–Έν•  λ•κ°€ μ•„λ‹ μ‚¬μ©ν•  λ•, μ¦‰ **κ°μ²΄λ¥Ό μƒμ„±ν•  λ•**λ‚ **λ©”μ†λ“λ¥Ό νΈμ¶ν•  λ•** μ •ν•λ‹¤.

```java
List<T> stringList = new ArrayList<T>();

List<String> stringList = new ArrayList<String>();
```

### μ λ„¤λ¦­ μ‚¬μ© μ΄μ 

1. μ»΄νμΌ μ‹μ μ—μ„ νƒ€μ… κ²€μ‚¬λ¥Ό ν†µν•΄ μμ™Έλ¥Ό λ°©μ§€ν•  μ μλ‹¤.
2. λ¶ν•„μ”ν• μΊμ¤ν…μ„ μ—†μ•  μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬ μ μλ‹¤.

### μ λ„¤λ¦­ μ‚¬μ© μ‹ μ£Όμμ 

1. μ λ„¤λ¦­ νƒ€μ…μ κ°μ²΄λ” μƒμ„±μ΄ λ¶κ°€λ¥ν•λ‹¤.

   ```java
   T t = new T(); // λ¶κ°€λ¥
   ```

2. static λ©¤λ²„μ— μ λ„¤λ¦­ νƒ€μ…μ΄ μ¬ μ μ—†λ‹¤.

   - static λ©¤λ²„λ” ν΄λμ¤κ°€ λ™μΌν•κ² κ³µμ ν•λ” λ³€μλ΅, μ λ„¤λ¦­ κ°μ²΄κ°€ μƒμ„±λκΈ° μ „μ— μ΄λ―Έ μλ£ νƒ€μ…μ΄ μ •ν•΄μ Έ μμ–΄μ•Ό ν•¨.

   ```java
   public static T addAge (int n) {...}
   ```

3. κΈ°λ³Έμ μΌλ΅ μ λ„¤λ¦­ ν΄λμ¤ μμ²΄λ¥Ό λ°°μ—΄λ΅ λ§λ“¤ μλ” μ—†λ‹¤.

   ```java
   class Sample<T> {}
   
   Sample<Integer>[] arr1 = new Sample<>[10]; // λ¶κ°€λ¥
   ```

   κ·Έλ¬λ‚ μ λ„¤λ¦­ νƒ€μ…μ λ°°μ—΄ μ„ μ–Έμ€ ν—μ©λλ‹¤.

   ```java
   // λ°°μ—΄μ— μ €μ¥ν•  Sample κ°μ²΄μ νƒ€μ… νλΌλ―Έν„°λ¥Ό Integer λ΅ μ§€μ •ν•¨.
   Sample<Integer>[] arr2 = new Sample[10];// new Sample<Integer>() μΈμ¤ν„΄μ¤λ§ μ €μ¥ν•λ” λ°°μ—΄.
   ```

<br/>

## μ λ„¤λ¦­ μ‚¬μ©λ²•

### μ λ„¤λ¦­ ν΄λμ¤ μ„ μ–Έ

```java
class MyArray<T> {
  T element; 
  void setElement(T element) {
    this.element = element;
  }
 	T getElement() {
    return element;
  }
}
```

`T` λ¥Ό νƒ€μ… λ§¤κ°λ³€μ (type parameter) λΌκ³  ν•λ©°, μ„μμ μ°Έμ΅°ν• νƒ€μ…μ„ μλ―Έν•λ‹¤. 

- κΌ­ 'T' λΏλ§ μ•„λ‹λΌ μ–΄λ– ν• λ¬Έμλ¥Ό μ‚¬μ©ν•΄λ„ μƒκ΄€ μ—†μΌλ©°, μ—¬λ¬ κ°μ νƒ€μ… λ³€μλ” μ‰Όν‘(,) λ΅ κµ¬λ¶„ν•μ—¬ λ…μ‹ν•  μ μλ‹¤.

  > **νƒ€μ… λ§¤κ°λ³€μλ…μ μΌλ°μ μΈ κ΄€λ΅€ λ° λ³΄νΈμ μΈ μ„ νƒ**
  >
  > - λ³΄ν†µ ν• λ¬Έμλ΅ μ΄λ¦„μ„ μ§“λ”λ‹¤.
  > - λ€λ¬Έμλ΅ μ΄λ¦„μ„ μ§“λ”λ‹¤.
  >
  > **E** : Element
  >
  > **K** : Key
  >
  > **N** : Number
  >
  > **T** : Type
  >
  > **V** : Value

- νƒ€μ… λ³€μλ” ν΄λμ¤μ—μ„λΏλ§ μ•„λ‹λΌ λ©”μ†λ“μ λ§¤κ°λ³€μλ‚ λ°ν™κ°’μΌλ΅λ„ μ‚¬μ©ν•  μ μλ‹¤.

- λ§¤κ°λ³€μλ΅ ν• λ‹Ήλ°›μ„ μ μλ” νƒ€μ…μ€ μ°Έμ΅°ν• (Reference type) λΏμ΄λ‹¤. (μ›μ‹ν•(Primitive type) λ¶κ°€λ¥.)

### μ λ„¤λ¦­ ν΄λμ¤ μƒμ„±

```java
MyArray<Integer> myArr = new MyArray<Integer>();
MyArray<Integer> myArr = new MyArray<>(); // Java SE 7 λ¶€ν„° νƒ€μ… μƒλµ κ°€λ¥.
```

νƒ€μ… λ³€μ μλ¦¬μ— μ‚¬μ©ν•  μ‹¤μ  νƒ€μ…μ„ λ…μ‹ν•λ©΄, κΈ°μ΅΄μ— λ‚΄λ¶€μ μΌλ΅λ” μ •μλ νƒ€μ… λ³€μκ°€ λ…μ‹λ μ‹¤μ  νƒ€μ…μΌλ΅ λ³€ν™λλ‹¤.

> **νƒ€μ… λ§¤κ°λ³€μ (type parameter)** : MyArray<T> μ—μ„ T
>
> **νƒ€μ… μΈμ (type argument)** : MyArray<Integer> μ—μ„ Integer
>
> **λ§¤κ°λ³€μν™” νƒ€μ… (parameterized type)** : MyArray<Integer>

<br/>

### μ λ„¤λ¦­ μ κ±° μ‹κΈ°

1. μλ°” μ½”λ“μ—μ„ μ„ μ–Έλκ³  μ‚¬μ©λ μ λ„¤λ¦­μ€ μ»΄νμΌ μ‹ μ»΄νμΌλ¬μ— μν•΄ μλ™μΌλ΅ κ²€μ‚¬λμ–΄ νƒ€μ… λ³€ν™λλ‹¤.
2. μ΄ν›„ μ½”λ“ λ‚΄μ λ¨λ“  μ λ„¤λ¦­μ€ μ κ±°λμ–΄, μ»΄νμΌλ λ°”μ΄νΈ μ½”λ“μ—λ” μ–΄λ– ν• μ λ„¤λ¦­λ„ ν¬ν•¨λμ–΄ μμ§€ μ•κ² λλ‹¤.

&rarr; μ λ„¤λ¦­μ„ μ‚¬μ©ν•μ§€ μ•λ” μ½”λ“μ™€μ νΈν™μ„± μ μ§€λ¥Ό μ„ν•¨.

<br/>

## μ ν•λ νƒ€μ… λ§¤κ°λ³€μ (Bounded Type Parameter)

μƒμ† κ΄€κ³„λ¥Ό ν‘μ‹ν•μ—¬ λ§¤κ°λ³€μμ νƒ€μ…μ„ μ ν•ν•  μ μλ‹¤.

```java
class Box<T extends Number> {...}
```

- μΈμ¤ν„΄μ¤ μƒμ„± μ‹ νƒ€μ… μΈμλ΅ Number λλ” μ΄λ¥Ό μƒμ†ν•λ” ν΄λμ¤λ§ μ¬ μ μλ„λ΅ μ„¤μ •ν•¨.

**μΈν„°νμ΄μ¤μ—μ„** 2κ° μ΄μƒμ νƒ€μ…μ„ λ™μ‹μ— μƒμ†ν• κ²½μ°λ΅ νƒ€μ…μ„ μ ν•ν•λ” κ²½μ°, '&' μ—°μ‚°μλ¥Ό μ‚¬μ©ν•λ‹¤.

```java
interface Readable {}
interface Closeable {}

class Box<T extends Readable, Closeable> {}
```

- ν΄λμ¤λ΅λ” λ‹¤μ¤‘ extends λ” λ¶κ°€λ¥ (λ‹¤μ¤‘ μƒμ† λ¶κ°€), μ¤λ΅μ§€ μΈν„°νμ΄μ¤λ΅λ§ κ°€λ¥ν•λ‹¤.

<br/>

## μ™€μΌλ“ μΉ΄λ“

### ν•μ •μ  μ™€μΌλ“ μΉ΄λ“ (Bounded Wildcard)

νΉμ • νƒ€μ…μ„ κΈ°μ¤€μΌλ΅ μƒν• λ²”μ„μ™€ ν•ν• λ²”μ„λ¥Ό μ§€μ •ν•¨μΌλ΅μ¨ νΈμ¶ λ²”μ„λ¥Ό ν™•μ¥ λλ” μ ν•ν•  μ μλ‹¤.

λ‹¤μκ³Ό κ°™μ€ μƒμ† κ΄€κ³„μ ν΄λμ¤κ°€ μ΅΄μ¬ν•λ‹¤κ³  κ°€μ •: 

```java
class MyGrandParent{}
class MyParent extends MyGrandParent{}
class MyChild extends MyParent{}
```

#### 1. μƒν• κ²½κ³„ μ™€μΌλ“μΉ΄λ“(Upper Bounded Wildcard)

μ™€μΌλ“μΉ΄λ“ νƒ€μ…μ— `extends` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•΄μ„ μ™€μΌλ“μΉ΄λ“ νƒ€μ…μ μµμƒμ„ νƒ€μ…μ„ μ •μν•¨μΌλ΅μ¨ μƒν• κ²½κ³„λ¥Ό μ„¤μ •ν•λ‹¤.

```java
void printCollection(Collection<? extends MyParent> c) { // MyParentλ΅ μƒν• κ²½κ³„.
  for (MyChild e: C) {}
  for (MyParent e: C) {}
  for (MyGrandParent e: C) {} 
  for (Object e: C) {} 
}
```

#### 2. ν•ν• κ²½κ³„ μ™€μΌλ“μΉ΄λ“ (Lower Bounded Wildcard)

μ™€μΌλ“μΉ΄λ“ νƒ€μ…μ— `super` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•΄μ„ μ™€μΌλ“μΉ΄λ“ νƒ€μ…μ μµν•μ„ νƒ€μ…μ„ μ •μν•¨μΌλ΅μ¨ ν•ν• κ²½κ³„λ¥Ό μ„¤μ •ν•λ‹¤.

```java
void addElement(Collection<? super MyParent> c) {
    c.add(new MyChild());
    c.add(new MyParent());
    c.add(new MyGrandParent());  // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
    c.add(new Object());         // λ¶κ°€λ¥(μ»΄νμΌ μ—λ¬)
}
```

### PECS κ³µμ‹

**PECS (Producer-Extends, Consumer-Super) κ³µμ‹ **(from Effective Java)

μ™€μΌλ“μΉ΄λ“ νƒ€μ…μ κ°μ²΄λ¥Ό μƒμ„±ν•λ©΄ (Produce) `extends`, κ°–κ³  μλ” κ°μ²΄λ¥Ό μ»¬λ ‰μ…μ— μ‚¬μ©ν•λ©΄ (Consume) `super` λ¥Ό μ‚¬μ©ν•λ‹¤.

<br/>

## μ λ„¤λ¦­ λ©”μ†λ“

### μ λ„¤λ¦­ λ©”μ†λ“ μ •μ

```java
class MyData {
  public static <T> showData(T data) { // λ©”μ†λ“μ T μλ£ν•μ΄ λ§¤κ°λ³€μμ μλ£ν•μ„ κ²°μ •ν•λ‹¤.
    if (data instance of String) System.out.println("String");
    else if (data instance of Integer) System.out.println("Integer");
    else if if (data instance of Double) System.out.println("Double");
    return data;
  }
}
```

<br/>

## μ†κ±° Erasure

μ›μ†μ νƒ€μ…μ„ μ»΄νμΌ νƒ€μ„μ—λ§ κ²€μ‚¬ν•κ³ , λ°νƒ€μ„μ—λ” ν•΄λ‹Ή νƒ€μ… μ •λ³΄λ¥Ό μ• μ μ—†μ.

μ»΄νμΌ νƒ€μ„μ—λ§ νƒ€μ… μ μ•½ μ΅°κ±΄μ„ μ •μν•κ³ , λ°νƒ€μ„μ—λ” νƒ€μ…μ„ μ κ±°ν•λ‹¤.

### Java μ»΄νμΌλ¬μ νƒ€μ… μ†κ±°

1. μ λ„¤λ¦­ νƒ€μ… (Example<T>) μ—μ„λ” Compable μ΄λ‚ Object λ΅ λ³€κ²½ν•λ‹¤.

   - Object λ΅ λ³€κ²½ν•λ” κ²½μ°λ” unbounded λ κ²½μ°λ¥Ό λ»ν•λ©°, μ΄λ” <E extends Comparable<E>> μ™€ κ°™μ΄ bound λ¥Ό ν•΄μ£Όμ§€ μ•μ€ κ²½μ°λ¥Ό μλ―Έν•λ‹¤.
   - bound typeμ κ²½μ°λ” Comparable λ΅ λ³€ν™ν•λ‹¤.

   - μ†κ±° κ·μΉ™μ— λ€ν• λ°”μ΄νΈμ½”λ“λ” **μ λ„¤λ¦­μ„ μ μ©ν•  μ μλ”** μΌλ° ν΄λμ¤, μΈν„°νμ΄μ¤, λ©”μ†λ“μ—λ§ ν•΄λ‹Ήλλ‹¤.

2. νƒ€μ… μ•μ •μ„± λ³΄μ΅΄μ„ μ„ν•΄ ν•„μ”ν•λ‹¤λ©΄ type casting μ„ λ„£μ–΄μ¤€λ‹¤.
3. ν™•μ¥λ μ λ„¤λ¦­ νƒ€μ…μ—μ„ λ‹¤ν•μ„±μ„ λ³΄μ΅΄ν•κΈ° μ„ν•΄ bridge method λ¥Ό μƒμ„±ν•λ‹¤.

<br/>

---

**Reference**

π“– Must Have μ΄μ¬ν™μ μλ°” ν”„λ΅κ·Έλλ° μ…λ¬Έ

π”— http://www.tcpschool.com/java/java_generic_concept

π”— https://itkjspo56.tistory.com/274

π”— https://mangkyu.tistory.com/241

π”— https://itkjspo56.tistory.com/275
