# λλ‹¤μ‹(Lambda Expression)

λ©”μ†λ“λ¥Ό ν•λ‚μ μ‹μΌλ΅ ν‘ν„ν• κ²ƒμ„ λ§ν•λ‹¤. 

λλ‹¤μ‹μ€ ν•¨μμ μ΄λ¦„μ΄ μ—†κΈ° λ•λ¬Έμ— **μµλ…ν•¨μ**λΌκ³ λ„ ν•λ‹¤.

- Java 8μ—μ„λ¶€ν„° μ§€μ›λμ—λ‹¤.
- λλ‹¤μ‹μ λ“±μ¥μΌλ΅ μλ°”λ” κ°μ²΄μ§€ν–¥ μ–Έμ–΄μ νΉμ§•κ³Ό ν•¨κ» ν•¨μν• μ–Έμ–΄μ νΉμ„±μ„ κ°–μ¶”κ² λμ—λ‹¤.
- μ¥μ 
  - μ½”λ“κ°€ κ°„κ²°ν•΄μ§„λ‹¤.
  - ν•¨μλ¥Ό λ§λ“λ” κ³Όμ •μ—†μ΄ ν•λ²μ— μ²λ¦¬ν•  μ μκΈ° λ•λ¬Έμ— μ½”λ”©μ‹κ°„μ΄ λ‹¨μ¶•λλ‹¤.
  - μ§€μ—° μ—°μ‚° λ“±μ„ ν†µν•΄μ„ μ„±λ¥ ν–¥μƒμ„ λ„λ¨ν•  μ μλ‹¤.
- λ‹¨μ 
  - λλ‹¤λ¥Ό μ‚¬μ©ν•λ©΄μ„ λ§λ“λ” λ¬΄λ…ν•¨μλ¥Ό μ¬μ‚¬μ©μ΄ λ¶κ°€λ¥ν•λ‹¤.
  - λ¨λ“  μ›μ†λ¥Ό μνν•λ” κ²½μ°μ—λ” μ„±λ¥μ΄ λ–¨μ–΄μ§ μ μλ‹¤.
  - λ§μ€ λλ‹¤μ‹μ„ μ‚¬μ©ν•λ” κ²½μ°, μ½”λ“λ¥Ό λ¶„μ„ν•κΈ° μ–΄λ ¤μ› μ§ μ μλ‹¤.

### π“ λλ‹¤μ‹ λ¬Έλ²•
``` java
(λ§¤κ°λ³€μ, ... ) -> { ν•¨μ λ°”λ”” }
```

- λ§¤κ°λ³€μ λ¦¬μ¤νΈ
  - λ§¤κ°λ³€μλ¥Ό μ»΄νμΌλ¬κ°€ μ¶”λ΅ ν•  μ μλ” κ²½μ°μ—λ” νƒ€μ…μ„ μƒλµν•  μ μλ‹¤.
    - λ§¤κ°λ³€μμ νƒ€μ…μ„ μ¶”λ΅ ν•  μ μ—†λ” κ²½μ°μ—λ” λ©”μ†λ“μ λ§¤κ°λ³€μμ²λΌ νƒ€μ…μ„ λ…μ‹ν•΄μ•Όν•λ‹¤.
  - λ§¤κ°λ³€μκ°€ ν•λ‚μΈ κ²½μ° κ΄„νΈλ¥Ό μƒλµν•  μ μλ‹¤.
- μ• λ΅μ° ν† ν° (->)
  - λ§¤κ°λ³€μ λ¦¬μ¤νΈμ™€ ν•¨μ λ°”λ””λ¥Ό λ¶„λ¦¬μ‹ν‚¤λ” μ—­ν• μ΄λ‹¤.
- ν•¨μ λ°”λ””
  - ν•¨μμ μ½”λ“μ΄λ‹¤.
  - μ¤‘κ΄„νΈ`{ }`λ΅ λ‘λ¬μ‹Έλ” κ²ƒμ΄ μΌλ°μ μ΄μ§€λ§, ν• λ¬Έμ¥μΈ κ²½μ° μƒλµν•΄λ„ λλ‹¤.
  - μ¤‘κ΄„νΈκ°€ μƒλµλ λλ‹¤μ‹μ—μ„λ” μ„Έλ―Έμ½λ΅ `;`μ„ λ¶™μ΄μ§€ μ•λ”λ‹¤.
  - β οΈ λλ‹¤μ‹μ λ°”λ””μ— `return`λ¬Έμ΄ μλ” κ²½μ° μ¤‘κ΄„νΈλ¥Ό μƒλµν•  μ μ—†λ‹¤.

> π… **μμ ) λλ‹¤λ¥Ό μ΄μ©ν• μ»¬λ ‰μ… μν** <br>
> ``` java
> List<String> list = new ArrayList();
> list.add("johnny");
> list.add("jay");
> list.add("mark");
> list.add("andy");
> 
> // λ‘μ΄ λ™μΌν• κ²°κ³Όλ¥Ό λ³΄μ—¬μ¤€λ‹¤.
> list.forEach(x -> System.out.println(x));
> list.forEach(System.out::println);
> ```

## ν•¨μν• μΈν„°νμ΄μ¤(Functional Interface)
μ¶”μƒ λ©”μ†λ“ ν•λ‚λ§ μλ” μΈν„°νμ΄μ¤λ¥Ό λ§ν•λ‹¤.

λλ‹¤μ‹μ„ λ‹¤λ£¨κΈ° μ„ν• μΈν„°νμ΄μ¤λ΅, λλ‹¤μ‹μ„ ν•λ‚μ λ³€μμ— λ€μ…ν•  λ• μ‚¬μ©ν•λ” μ°Έμ΅° λ³€μμ νƒ€μ…μ„ ν•¨μν• μΈν„°νμ΄μ¤λΌκ³  λ¶€λ¥Έλ‹¤.

``` java
interface MyFunction {
	int calc(int x, int y); // μ¶”μƒ λ©”μ†λ“
}
```

μ„ μμ μ—μ„λ” ν•¨μν• μΈν„°νμ΄μ¤ `MyFunction`μ„ μ‘μ„±ν–λ‹¤.

> π’΅ `@FunctionalInterface` <br>
> ν•¨μν• μΈν„°νμ΄μ¤ μ•μ— @FunctionalInterface μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•μ—¬, μ»΄νμΌλ¬μ—μ„Έ ν•¨μν• μΈν„°νμ΄μ¤μ μ‘μ„±μ„ μ•λ¦΄ μ μλ‹¤.
> ``` java
> @FunctionalInterface
> interface MyFunction {
> 	int calc(int x, int y);
> }
> ```
> μ»΄νμΌλ¬μ—κ² μ¶”μƒ λ©”μ†λ“κ°€ 1κ°λ§ μλ” ν•¨μν• μΈν„°νμ΄μ¤μΈμ§€ ν™•μΈν•λ„λ΅ ν•μ—¬, μ²μλ¶€ν„° μλ»λ μΈν„°νμ΄μ¤ μ‘μ„±μ„ λ§‰μ„ μ μλ‹¤.

### π“ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒλ©”μ†λ“λ¥Ό λλ‹¤μ‹μΌλ΅ κµ¬ν„
``` java
μ°Έμ΅°λ³€μμνƒ€μ… μ°Έμ΅°λ³€μλ… = λλ‹¤ ν‘ν„μ‹
```

λλ‹¤μ‹μ μ‘μ„±μ€ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ†λ“μ— μ½”λ“λ¥Ό μ‘μ„±ν•λ” κ²ƒκ³Ό κ°™λ‹¤.

``` java
(x, y)- > { return x + y; }
```

λλ‹¤μ‹μ„ μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ” λλ‹¤μ‹μ„ λ‹¤μκ³Ό κ°™μ΄ λ³€μ fμ— μΉν™ν•λ‹¤.

``` java
MyFunction f = (x, y) -> { return x + y; }
```

> π’΅ **μ»΄νμΌλ¬ μ²λ¦¬ κ³Όμ •** <br>
> μ»΄νμΌλ¬λ” μ„ λ¬Έμ¥μ„ λ‹¤μκ³Ό κ°™μ΄ μ²λ¦¬ν•λ‹¤.
> 1. `MyFunction` μΈν„°νμ΄μ¤μ `calc()` λ©”μ†λ“λ¥Ό κµ¬ν„ν• λλ‹¤μ‹μ„ κ°€μ§„ μµλ…μ ν΄λμ¤ κ°μ²΄λ¥Ό μƒμ„±ν•λ‹¤.
> 2. μ΄ κ°μ²΄λ¥Ό λ νΌλ°μ¤ λ³€μ fκ°€ κ°€λ¦¬ν‚¤κ² ν•λ‹¤.
> 3. κ²°κµ­, μƒμ„±λ κ°μ²΄ μ•μ—λ” λ‹¤μκ³Ό κ°™μ΄ κµ¬ν„λ κ²ƒμΌλ΅ λ³΄λ©΄ λλ‹¤.
> 
> ``` java
> int calc(int x, int y) ( return x + y; }
> ```

### π“ λλ‹¤μ‹ νΈμ¶

``` java
interface MyFunction { // ν•¨μν• μΈν„°νμ΄μ¤ 
	int calc(int x, int y); // λλ‹¤μ‹μΌλ΅ κµ¬ν„ν•  μ¶”μƒ λ©”μ†λ“ 
} 

public class Ex { 
	public static void main(String[] args) { 
		MyFunction add = (x, y) -> { return x + y; }; // λλ‹¤μ‹ 
		MyFunction minus = (x, y) -> x - y; // λλ‹¤μ‹ ( μ¤‘κ΄„νΈμ™€ return μƒλµ )

		System.out.println(add.calc(1, 2)); // λλ‹¤μ‹ νΈμ¶		
		System.out.println(minus.calc(1, 2)); // λλ‹¤μ‹ νΈμ¶
	} 
}
```


## Variable Capture

``` java
public class LambdaCapturing {
	private int a = 127;

	public void test() {
		int b = 209;
		
		final Runnable ra = () -> System.out.println(a);
		final Runnable rb = () -> System.out.println(b);
	}
}
```

λλ‹¤ μ‹κ·Έλ‹μ²μ νλΌλ―Έν„°λ΅ λ„κ²¨μ§„ λ³€μκ°€ μ•„λ‹ μ™Έλ¶€μ—μ„ μ •μλ λ³€μλ¥Ό **μμ  λ³€μ(Free Variable)** λΌκ³  λ¶€λ¥Έλ‹¤. λν• λλ‹¤ λ°”λ””μ—μ„ μμ  λ³€μλ¥Ό μ°Έμ΅°ν•λ” ν–‰μ„λ¥Ό **λλ‹¤ μΊ΅μ²λ§(Lambda Capturing)** μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

### π“ λλ‹¤ μΊ΅μ²λ§μ μ μ•½ μ΅°κ±΄
μ§€μ—­ λ³€μλ¥Ό λλ‹¤ μΊ΅μ²λ§ν•  λ• μ•„λμ™€ κ°™μ€ μ μ•½μ΅°κ±΄μ΄ μλ‹¤.
1. μ§€μ—­λ³€μλ” `final`λ΅ μ„ μ–Έλμ–΄μμ–΄μ•Όν•λ‹¤.
2. `final`λ΅ μ„ μ–Έλμ§€ μ•μ€ μ§€μ—­λ³€μλ” `final`μ²λΌ λ™μ‘ν•΄μ•Όν•λ‹¤. (μ¦‰, κ°’μ μ¬ν• λ‹Ήμ΄ λ°μƒν•λ©΄ μ•λλ‹¤.)

``` java
public class LambdaCapturing {
	private int a = 127;

	public void test() {
		int b = 209;
		final int c = 507;
		int d = 7;
		
		// O: μΈμ¤ν„΄μ¤ λ³€μ aλ” μ μ•½μ΅°κ±΄μ΄ μ μ©λμ§€ μ•λ”λ‹¤.
		final Runnable ra = () -> {
			a = 123; // finalλ΅ μ„ μ–Έν•μ§€ μ•μ•„λ„ λλ©°, μ¬ν• λ‹Ήν•λ” κ²ƒμ΄ κ°€λ¥ν•λ‹¤.
			System.out.println(a);
		};

		// O: μ§€μ—­λ³€μ bλ” finalλ΅ μ„ μ–Έν•μ§€ μ•μ•μ§€λ§, μ¬ν• λ‹Ήμ„ ν•μ§€μ•μ•λ‹¤.
		final Runnable rb = () -> System.out.println(b);

		// O: μ§€μ—­λ³€μ cλ” finalλ΅ μ„ μ–Έλμ–΄ μλ‹¤.
		final Runnable rc = () -> System.out.println(c);

		// X: μ§€μ—­λ³€μ dλ” finalλ΅ μ„ μ–Έν•μ§€ μ•μ•κ³ , κ°’μ μ¬ν• λ‹Ήμ΄ μΌμ–΄λ‚¬λ‹¤.
		d = 777;
		final Runnable rd = () -> System.out.println(d);
	}
}
```

> π¤” **μ™ μ΄λ° μ μ•½μ΅°κ±΄μ΄ μƒκ²Όμ„κΉ?** <br><br>
> JVMμ—μ„ μ§€μ—­λ³€μλ” μ¤νƒμ΄λΌλ” μμ—­μ— μƒμ„±λλ‹¤. μ¤λ λ“λ§λ‹¤ λ³„λ„μ μ¤νƒμ΄ μƒμ„±λκΈ° λ•λ¬Έμ—, μ§€μ—­ λ³€μλ” μ¤λ λ“λΌλ¦¬ κ³µμ ν•μ§€ μ•λ”λ‹¤. <br>
> JVMμ—μ„ μΈμ¤ν„΄μ¤ λ³€μλ” ν™ μμ—­μ— μƒμ„±λλ‹¤. μΈμ¤ν„΄μ¤ λ³€μλ” μ¤λ λ“λΌλ¦¬ κ³µμ κ°€ κ°€λ¥ν•λ‹¤. <br><br>
> λλ‹¤λ” λ³„λ„μ μ¤λ λ“μ—μ„ μ‹¤ν–‰μ΄ κ°€λ¥ν•κΈ° λ•λ¬Έμ—, μ›λ μ§€μ—­λ³€μκ°€ μλ” μ¤λ λ“κ°€ μ‚¬λΌμ΅μ–΄λ„ λλ‹¤κ°€ μ‹¤ν–‰ μ¤‘μΈ μ¤λ λ“λ” μ‚΄μ•„μμ„ κ°€λ¥μ„±μ΄ μλ‹¤. λλ‹¤κ°€ μ‚¬λΌμ§„ μ¤λ λ“μ μ§€μ—­λ³€μλ¥Ό μ°Έμ΅°ν•κ³  μλ” κ²½μ°, μ¤λ¥κ°€ λ‚  κ²ƒ κ°™μ§€λ§ μ¤λ¥κ°€ λ°μƒν•μ§€ μ•λ”λ‹¤. λλ‹¤μ—μ„ μ§€μ—­λ³€μμ— μ§μ ‘μ μΌλ΅ μ ‘κ·Όν•λ” κ² μ•„λ‹λΌ μ§€μ—­λ³€μλ¥Ό μμ‹  μ¤λ λ“μ μ¤νƒμ— λ³µμ‚¬ν•κΈ° λ•λ¬Έμ΄λ‹¤.<br><br>
> **λ”°λΌμ„ μ§€μ—­λ³€μμ—λ” finalμ΄κ±°λ‚ final κ°™μ΄ λ™μ‘ν•΄μ•Όν•λ‹¤λ” μ μ•½μ΅°κ±΄μ΄ μƒκΈ΄ κ²ƒμ΄λ‹¤.**


## λ©”μ†λ“ μ°Έμ΅°

λ©”μ†λ“λ¥Ό μ°Έμ΅°ν•΄μ„ λ§¤κ°λ³€μμ μ •λ³΄ λ° λ°ν™ νƒ€μ…μ„ μ•μ•„λ‚΄, **λλ‹¤μ‹μ—μ„ λ¶ν•„μ”ν• λ§¤κ°λ³€μλ¥Ό μ κ±°ν•λ” κ²ƒ**μ„ λ§ν•λ‹¤.

``` java
(x, y) -> Math.min(x, y)
```

μ„ μμ μ λλ‹¤μ‹μ€ λ‹¨μν λ‘κ°μ κ°’μ„ `Math.min()` μ •μ λ©”μ†λ“μ λ§¤κ°κ°’μΌλ΅ μ „λ‹¬λ§ ν•κΈ° λ•λ¬Έμ— λ©”μ†λ“ μ°Έμ΅°λ¥Ό μ΄μ©ν•μ—¬ μ•„λμ™€ κ°™μ΄ μ½”λ“λ¥Ό μ¤„μΌ μ μλ‹¤.

``` java
Math::min;
```

μ΄λ¥Ό ν•¨μν• μΈν„°νμ΄μ¤μ— λ‹΄κ³  μ‹¶λ‹¤λ©΄ λ‘κ°μ int λ§¤κ°κ°’μ„ λ°›μ•„ int κ°’μ„ λ°ν™ν•κΈ° λ•λ¬Έμ—, `IntBinaryOperator` μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ λλ‹¤. `IntBinaryOperator` μΈν„°νμ΄μ¤μ—μ„λ” `applyAsInt()` λ©”μ†λ“λ¥Ό ν™μ©ν•μ—¬ μ—°μ‚°ν• κ°’μ„ intλ΅ λ°ν™ν•  μ μλ‹¤.

``` java
IntBinaryOperator operator = Math::min;
```

### π… μ •μ  λ©”μ†λ“μ™€ μΈμ¤ν„΄μ¤ λ©”μ†λ“ μ°Έμ΅°
μ •μ  λ©”μ†λ“λ¥Ό μ°Έμ΅°ν•λ” κ²½μ° `ν΄λμ¤::λ©”μ†λ“` μ²λΌ ν΄λμ¤ μ΄λ¦„ λ’¤μ— λ”λΈ” μ½λ΅  μ—°μ‚°μ `::`κΈ°νΈλ¥Ό λ¶™μ΄κ³  μ •μ  λ©”μ†λ“ μ΄λ¦„μ„ λ„£μΌλ©΄ λλ‹¤.

μΈμ¤ν„΄μ¤ λ©”μ†λ“λ¥Ό μ°Έμ΅°ν•  κ²½μ°μ—λ” `μ°Έμ΅°λ³€μ::λ©”μ†λ“` μ²λΌ λ¨Όμ € κ°μ²΄λ¥Ό μƒμ„±ν• λ‹¤μ μ°Έμ΅° λ³€μλ’¤μ— `::`κΈ°νΈλ¥Ό λ¶™μ΄κ³  μΈμ¤ν„΄μ¤ λ©”μ†λ“ μ΄λ¦„μ„ λ„£μΌλ©΄ λλ‹¤.

``` java
public class Calculator {

	public static int staticSum(int x, int y){
		return x + y;
	}

	public int instanceSum(int x, int y){
		return x + y;
	}
}
```

``` java
public class Main {
	public static void main(String[] args) {
		IntBinaryOperator operator;

		// μ •μ  λ©”μ†λ“ μ°Έμ΅°
		operator = Calculator::staticSum; // (x, y) -> Calculator.staticSum(x, y)
		System.out.println(operator.applyAsInt(1, 2));

		// μΈμ¤ν„΄μ¤ λ©”μ†λ“ μ°Έμ΅°
		Calculator c = new Calculator();
		operator = c::instanceSum; // (x, y) -> c.instanceSum(x, y)    
		System.out.println(operator.applyAsInt(3, 4));
	}
}
```

<br>

### π… λ§¤κ°λ³€μμ λ©”μ†λ“ μ°Έμ΅°

μ™Έλ¶€ ν΄λμ¤ λ©”μ†λ“κ°€ μ•„λ‹, λλ‹¤μ‹μ λ§¤κ°λ³€μμ λ©”μ†λ“λ¥Ό μ°Έμ΅°ν•λ” κ²½μ° 

``` java
public class Main {
	public static void main(String[] args) {
		ToIntBiFunction<String, String> function = String::compareTo; // (x, y) -> x.compareTo(y)
		print(function.applyAsInt("Johnny", "Mark"));
		print(function.applyAsInt("Johnny", "Johnny"));
	}

	public static void print(int order) {
    	if (order == 0) System.out.println("λ™μΌν• λ¬Έμμ—΄");
		else System.out.println("λ™μΌν•μ§€ μ•μ€ λ¬Έμμ—΄");
	}
}
```

## μƒμ„±μ μ°Έμ΅°

λ‹¨μν κ°μ²΄λ¥Ό μƒμ„±ν•κ³  λ°ν™ν•λ„λ΅ κµ¬μ„±λ λλ‹¤μ‹μ€ μƒμ„±μ μ°Έμ΅°λ΅ λ³€ν™μ΄ κ°€λ¥ν•λ‹¤.

``` java
(x, y) -> new Dog(x, y);
```

μ„ μ½”λ“λ¥Ό μ•„λμ²λΌ λ³€κ²½ν•  μ μλ‹¤.

``` java
Dog::new
```

β οΈ **λ§¤κ°λ³€μλ΅ λ“¤μ–΄μ¤λ” κ°μμ— λ”°λΌμ„ λ‹¤λ¥Έ μƒμ„±μμ— μ ‘κ·Όν•λ‹¤.**

``` java
public class Dog {
	String name, breed;

	public Dog(String name){
		this.name = name;
	}

	public Dog(String name, String breed){
		this.name = name;
		this.breed = breed;
	}
}
```

``` java
public class Main {
	public static void main(String[] args) {
		Function<String, Dog> func = Dog::new;
		Dog dog = func.apply("Rami");
		BiFunction<String, String, Dog> func2 = Dog::new;
		Dog dog2 = func2.apply("Rami", "Bichon Frise");
	}
}
```

μƒμ„±μ μ°Έμ΅°λ” `Dog::new`λ΅ μ½”λ“λ” κ°™μ§€λ§, λ…μ‹ν•λ” ν•¨μν• μΈν„°νμ΄μ¤μ νƒ€μ…μ— λ”°λΌ λ‹¤λ¥Έ μƒμ„±μλ¥Ό νΈμ¶ν•  μ μλ‹¤.

> π’΅ **Tip** <br>
> `Function<T, R>` μΈν„°νμ΄μ¤λ” ν•¨μν• μΈν„°νμ΄μ¤λ΅, κ°μ²΄ Tλ¥Ό κ°μ²΄ Rλ΅ λ³€ν™ν•λ” μ—­ν• μ„ ν•λ‹¤.<br>`BiFunction<T, R, V>`λ” κ°μ²΄ Tμ™€ Rμ„ κ°μ²΄ Vλ΅ λ³€ν™ν•λ” μ—­ν• μ„ ν•λ‹¤.<br>

<br>

> **μ°Έκ³ ** <br>
> [1] [π“ λ…ν’ μλ°” μ—μ„Όμ…](https://nlp.jbnu.ac.kr/PL2021/java_lambda_expression.pdf), μƒλ¥μ¶ν <br>
> [2] https://hbase.tistory.com/78 <br>
> [3] https://perfectacle.github.io/2019/06/30/java-8-lambda-capturing/ <br>
> [4] https://steady-coding.tistory.com/307 <br>


